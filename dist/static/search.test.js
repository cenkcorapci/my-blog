const{BlogSearch}=require("./search");describe("BlogSearch",()=>{let e;const t={posts:[{id:"post-1",title:"Go Programming",date:"2024-01-01",tags:["go","backend"],slug:"post-1"},{id:"post-2",title:"JavaScript Guide",date:"2024-01-02",tags:null,slug:"post-2"}],invertedIndex:{go:["post-1"],programming:["post-1"],javascript:["post-2"],guide:["post-2"]}};beforeEach(()=>{e=new BlogSearch,e.posts=t.posts.map(e=>({...e,tags:e.tags||[]})),e.invertedIndex=t.invertedIndex,e.initialized=!0}),test("tokenize should split text and lowercase",()=>{expect(e.tokenize("Hello World!")).toEqual(["hello","world"])}),test("search should return exact tag matches first",()=>{const t=e.search("go");expect(t).toHaveLength(1),expect(t[0].id).toBe("post-1")}),test("search should handle null tags gracefully",()=>{const t=e.search("javascript");expect(t).toHaveLength(1),expect(t[0].id).toBe("post-2")}),test("search should return multiple results for common words",()=>{e.invertedIndex.code=["post-1","post-2"];const t=e.search("code");expect(t).toHaveLength(2)}),test("search should be case-insensitive",()=>{const t=e.search("JAVASCRIPT");expect(t).toHaveLength(1),expect(t[0].id).toBe("post-2")}),test("getSuggestions should return matching tags and titles",()=>{const t=e.getSuggestions("go");expect(t).toContain("go"),expect(t).toContain("Go Programming")}),test("sortByDate should sort newest first",()=>{const n=e.sortByDate(t.posts);expect(n[0].id).toBe("post-2"),expect(n[1].id).toBe("post-1")}),test("search should return empty array for no matches",()=>{const t=e.search("nonexistent");expect(t).toEqual([])}),test("search should return empty array for empty query",()=>{expect(e.search("")).toEqual([]),expect(e.search("   ")).toEqual([])})})